pipeline:
  frontend:
    image: node:12
    commands:
      - cd frontend
      - npm install
      - npm test

  backend:
    image: python:3.7
    commands:
      - cd backend
      - pip install --upgrade pip
      - pip install -r requirements.txt
      # - python manage.py migrate
      - python manage.py test

services:
  postgres:
    image: postgres:9.6
    environment:
      - POSTGRES_USER=pguser
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=test_db
